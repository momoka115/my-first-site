<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ほっこりお茶とかわいいひととき</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="intro-video" aria-label="Introduction video">
    <video
      id="introVideo"
      autoplay
      muted
      playsinline
      preload="metadata"
      poster="https://cdn.pixabay.com/photo/2020/10/07/16/15/tea-5639775_640.jpg"
    >
      <source
        src="https://cdn.pixabay.com/download/video/2022/03/15/21-16-12-107_640x360.mp4?filename=tea-pour-cup-71454.mp4"
        type="video/mp4"
      />
      Your browser does not support the video tag.
    </video>
    <p class="intro-text">ていくたいむ、はじまりのしずく。</p>
    <button class="skip-intro" aria-label="Skip intro video">スキップ</button>
  </div>
  <div class="teacup-snow" aria-hidden="true"></div>
  <main class="card">
    <div class="sprite-cluster" aria-hidden="true">
      <span class="dot dot-one"></span>
      <span class="dot dot-two"></span>
      <span class="dot dot-three"></span>
    </div>
    <div class="bubble" aria-hidden="true">
      <span>ふわり</span>
    </div>
    <div class="scene" aria-hidden="true">
      <span class="leaf leaf-one"></span>
      <span class="leaf leaf-two"></span>
      <span class="heart heart-one"></span>
      <span class="heart heart-two"></span>
    </div>
    <div class="card-inner">
      <section class="intro">
        <h1>お気に入りのお茶で ほっこりと</h1>
        <p class="tagline">ほんのり甘い湯気とゆるやかなひととき。<br />かわいい茶器を想像しながら、日々の癒しを自分に優しく届けています。</p>
        <div class="accent-line" aria-hidden="true"></div>
        <p>季節の草花、エスケープしたい平日の午後、<br />寝る前の静かな時間に寄り添ってくれる、わたしのティーコレクション。</p>
        <div class="button-row">
          <a class="cta" href="https://github.com/" target="_blank" rel="noopener">お気に入りをもっと見る</a>
          <span class="note">ゆるりとした気持ちで、今日も自分に優しく。</span>
        </div>
      </section>
      <section class="tea-column">
        <h2>ほっこりティーコレクション</h2>
        <ul class="tea-list">
      <li>
        <span class="tea-icon" aria-hidden="true"></span>
        <div class="tea-text">
          <strong>ミルキーベリーラテ</strong>
          <p>甘酸っぱいベリーがふわりと香るルイボスラテ。乳製品の代わりにアーモンドミルクでふんわり。</p>
        </div>
      </li>
      <li>
        <span class="tea-icon" aria-hidden="true"></span>
        <div class="tea-text">
          <strong>森のピーチグリーン</strong>
          <p>緑茶ベースにドライピーチとローズラップ。木漏れ日のような光をイメージして。</p>
        </div>
      </li>
      <li>
        <span class="tea-icon" aria-hidden="true"></span>
        <div class="tea-text">
          <strong>夜のハニーカモミール</strong>
          <p>トゥルシーとカモミール、少しのハチミツで優しい眠りへ誘うマジカルブレンド。</p>
        </div>
      </li>
      <li>
        <span class="tea-icon" aria-hidden="true"></span>
        <div class="tea-text">
          <strong>せせらぎジンジャー</strong>
          <p>しっかりしたしょうがとレモングラス、温かさをチャージしたい朝のべんとう前に。</p>
        </div>
      </li>
        </ul>
      </section>
    </div>
  </main>
  <script>
    const dropZone = document.querySelector(".teacup-snow");
    const videoOverlay = document.querySelector(".intro-video");
    const introVideo = document.getElementById("introVideo");
    const skipIntro = document.querySelector(".skip-intro");
    const body = document.body;
    let teaIntervalId;

    function createTeacup() {
      const span = document.createElement("span");
      const size = Math.random() * 1.4 + 0.8;
      span.style.setProperty("--cup-size", `${size}rem`);
      span.style.left = `${Math.random() * 100}%`;
      span.style.animationDuration = `${Math.random() * 4 + 6}s`;
      span.style.animationDelay = `${Math.random() * 2}s`;

      const steam = document.createElement("span");
      steam.className = "teacup-steam";
      span.appendChild(steam);

      span.addEventListener("animationend", () => {
        span.remove();
      });

      dropZone?.appendChild(span);
    }

    function runTeaRain(intervalDuration, burstCount = 10) {
      const count = burstCount;
      for (let i = 0; i < count; i += 1) {
        createTeacup();
      }
      clearInterval(teaIntervalId);
      teaIntervalId = setInterval(createTeacup, intervalDuration);
    }

    function hideIntroVideo() {
      if (!videoOverlay || videoOverlay.classList.contains("intro-hidden")) {
        return;
      }
      videoOverlay.classList.add("intro-hidden");
      body.classList.remove("intro-playing");
      videoOverlay.addEventListener(
        "transitionend",
        () => {
          videoOverlay.remove();
        },
        { once: true }
      );
    }

    skipIntro?.addEventListener("click", () => {
      introVideo?.pause();
      hideIntroVideo();
      runTeaRain(600, 16);
    });

    introVideo?.addEventListener("ended", hideIntroVideo);

    document.addEventListener("DOMContentLoaded", () => {
      body.classList.add("intro-playing");
      runTeaRain(1100);
      introVideo?.play().catch(() => {});
    });
  </script>
</body>
</html>
